var On=Object.defineProperty;var Ln=(n,e,t)=>e in n?On(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var X=(n,e,t)=>(Ln(n,typeof e!="symbol"?e+"":e,t),t),Yt=(n,e,t)=>{if(!e.has(n))throw TypeError("Cannot "+t)};var xe=(n,e,t)=>(Yt(n,e,"read from private field"),t?t.call(n):e.get(n)),zt=(n,e,t)=>{if(e.has(n))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(n):e.set(n,t)},qe=(n,e,t,s)=>(Yt(n,e,"write to private field"),s?s.call(n,t):e.set(n,t),t);import{I as Nn,S as _e,i as de,s as re,e as se,b as E,f as L,g as Ve,t as B,d as Ee,h as b,H as N,C as lt,J as G,K as R,m as D,n as c,D as rt,E as at,F as ht,L as $e,M as tt,N as jt,O as An,P as le,Q as he,w as Q,x as F,R as O,y as K,T as ne,U as ue,z as x,V as ut,W as me,q as H,a as $,r as M,c as Y,u as J,k as ee,l as te,p as we,B as Se,X as nt,o as Pn,G as V,Y as Bn,Z as Wn,_ as Oe,$ as Jt,a0 as Qt,a1 as Ft,a2 as Kt,a3 as Zn,a4 as Un}from"../../chunks/index-2de9d3a5.js";import{w as fe}from"../../chunks/index-131e4980.js";var ve=(n=>(n[n.IN=0]="IN",n[n.OUT=1]="OUT",n[n.INOUT=2]="INOUT",n))(ve||{}),A=(n=>(n.HIGH="1",n.LOW="0",n.X="X",n.Z="Z",n))(A||{});class Tn{constructor(e){X(this,"lm");this.lm=e}}class Xn extends Tn{constructor(t,s=null){super(t);X(this,"id");this.id=s===null?t.id++:s}}function Gn(n){var e,t;return t=class extends n{constructor(...i){super(...i);zt(this,e,void 0);qe(this,e,fe(this))}triggerUpdateSelf(){console.debug("[CanUpdate] Triggered self update"),xe(this,e).set(this),this.customUpdateCallback()}customUpdateCallback(){}getStore(){return xe(this,e)}},e=new WeakMap,t}function Rn(n){return class extends Gn(n){constructor(...s){super(...s);X(this,"x");X(this,"y");this.x=0,this.y=0}setPos(s,o){this.x=s,this.y=o,this.triggerUpdateSelf()}}}const Bt=Rn(Xn);class Sn extends Bt{constructor(t,s){super(t);X(this,"type");X(this,"connections");this.type=s,this.connections=[]}}class He extends Bt{constructor(t,s=""){super(t);X(this,"appearance");X(this,"viewWidth");X(this,"viewHeight");X(this,"width");X(this,"height");X(this,"showNames");X(this,"showLabels");X(this,"name");X(this,"in_pins");X(this,"out_pins");this.name=s,this.in_pins=[],this.out_pins=[],this.appearance="",this.showNames=!1,this.showLabels=!1,this.viewWidth=90,this.viewHeight=90,this.width=80,this.height=80}addInputPin(t=""){console.debug(`[Component(${this.name})${this.id}] Add Input Pin`),this.in_pins.push(this.lm.createInPort(this.in_pins.length,t,this.internalCallback.bind(this)))}addOutputPin(t=""){console.debug(`[Component(${this.name})${this.id}] Add Output Pin`),this.out_pins.push(this.lm.createOutPort(this.in_pins.length,t))}getInput(t){if(console.debug(`[Component(${this.name})${this.id}] Requested InPort ${t}`),0<=t&&t<this.in_pins.length)return this.lm.getInPort(this.in_pins[t]);throw RangeError(`The value ${t} is not in Range for Component ${this.name} with ${this.in_pins.length} Inputs`)}getOutput(t){if(console.debug(`[Component(${this.name})${this.id}] Requested OutPort ${t}`),0<=t&&t<this.out_pins.length)return this.lm.getOutPort(this.out_pins[t]);throw RangeError(`The value ${t} is not in Range for Component ${this.name} with ${this.out_pins.length} Outputs`)}internalCallback(t){console.debug(`[Component(${this.name})${this.id}] Update triggered by Input Connector${t}`);const s=this.in_pins.map(i=>this.lm.getInPort(i).readValue(this.id));this.onInputChange(s).forEach((i,l)=>this.lm.getOutPort(this.out_pins[l]).writeValue(this.id,i)),this.triggerUpdateSelf()}}let xt=class extends Bt{constructor(t,s,o){super(t);X(this,"lastValue");X(this,"conA");X(this,"conB");t.addWire(this),console.debug(`[Wire${this.id}] Constructing Wire (Connector${s}, Connector${o}`),this.conA=s,this.conB=o;const i=this.lm.getConnector(this.conA),l=this.lm.getConnector(this.conB);i.connect(this.id),l.connect(this.id),this.lastValue="Z";const r=i.readValue(this.id),a=l.readValue(this.id);let h=0,u=null;r!=="Z"&&(this.lastValue=r,h++,u=l),a!=="Z"&&(this.lastValue=a,h++,u=i),h>1?(this.lastValue="X",i.writeValue(this.id,this.lastValue),l.writeValue(this.id,this.lastValue)):u&&u.writeValue(this.id,this.lastValue),this.triggerUpdateSelf()}readValue(){return this.lastValue}updateValue(t,s){console.debug(`[Wire${this.id}] Value updated from Connector${t}`),this.id!==-1&&this.lastValue!==s&&(this.lastValue=s,this.conA===t?this.lm.getConnector(this.conB).writeValue(this.id,s):this.conB===t&&this.lm.getConnector(this.conA).writeValue(this.id,s),this.triggerUpdateSelf())}disconnectAll(){console.group(`[Wire${this.id}] Disconnecting all`);const t=this.lm.getConnector(this.conA),s=this.lm.getConnector(this.conB);t.disconnect(this.id),s.disconnect(this.id),t.postDisconnect(this.id),s.postDisconnect(this.id),this.id=-1,this.lastValue="Z",console.groupEnd(),this.triggerUpdateSelf()}getDrivers(t){if(console.debug(`[Wire${this.id}] Drivers Requested from Connector${t}`),this.id===-1)return[];if(t===this.conA)return this.lm.getConnector(this.conB).getDrivers(this.id);if(t===this.conB)return this.lm.getConnector(this.conA).getDrivers(this.id);throw new Error("This shouldn't have happened")}};var We;class Hn extends Sn{constructor(t,s){super(t,s);X(this,"lastValue");zt(this,We,void 0);this.lastValue="Z",qe(this,We,!1)}lock(){console.group(`[Connector${this.id}] lock()`),qe(this,We,!0)}unlock(){console.debug(`[Connector${this.id}] unlock()`),console.groupEnd(),qe(this,We,!1)}isLocked(){return xe(this,We)}spreadValue(t){console.debug(`[Connector${this.id}] spreadValue ${t}`),this.lock(),this.connections.forEach(s=>this.lm.getWire(s).updateValue(this.id,t)),this.unlock()}isDriving(){return this.type===1?this.lastValue!=="Z":!1}connect(t){console.debug(`[Connector${this.id}] Connecting Wire${t}`),this.type===0?(this.connections.forEach(s=>this.lm.getWire(s).disconnectAll()),this.connections=[t]):(this.disconnect(t),this.connections.push(t))}findWire(t){return this.connections.findIndex((s,o)=>s===t)}disconnect(t){console.debug(`[Connector${this.id}] Disconnecting Wire${t}`);let s=this.findWire(t);for(;s!==-1;)this.connections.splice(s,1),s=this.findWire(t)}postDisconnect(t){console.debug(`[Connector${this.id}] Post Process Disconnecting Wire${t}`)}readValue(t){return console.debug(`[Connector${this.id}] Value Requested from Caller${t}`),this.lastValue}writeValue(t,s){console.debug(`[Connector${this.id}] Write Requested from Caller${t} (${this.lastValue} -> ${s})`);const o=this.getDrivers(t);if(s==="Z"&&o.length===1)console.debug(`[Connector${this.id}] Caller disconnected now using Connector${o[0]} as Driver`),this.lastValue=this.lm.getConnector(o[0]).readValue(this.id),this.triggerUpdateSelf(),this.spreadValue(this.lastValue);else if(o.length>0)console.debug(`[Connector${this.id}] Invalidating too many drivers`),this.lastValue="X",this.triggerUpdateSelf(),this.spreadValue("X");else{console.debug(`[Connector${this.id}] Accepting Write (${this.lastValue} -> ${s})`),this.lastValue=s,this.triggerUpdateSelf();for(const i of this.connections)i!==t&&(this.lock(),this.lm.getWire(i).updateValue(this.id,s),this.lock())}}getDrivers(t){if(console.debug(`[Connector${this.id}] Requested Drivers from Caller${t}`),this.isLocked())return[];let s=[];this.lock();for(const o of this.connections)o!==t&&(s=s.concat(this.lm.getWire(o).getDrivers(this.id)));return this.unlock(),s}}We=new WeakMap;class qn extends Hn{constructor(e){super(e,2)}}class Mn extends Hn{constructor(t,s,o,i){super(t,s);X(this,"port_id");X(this,"port_name");this.port_id=o,this.port_name=i}}class en extends Mn{constructor(e,t,s=""){super(e,1,t,s)}writeValue(e,t){if(this.lm.isWire(e)){console.debug(`[OutPort${this.id}] Skipping write from Wire{caller} Checking for invalidation`),this.isDriving()&&t!=="Z"&&super.spreadValue("X");return}console.debug(`[OutPort${this.id}] Accepting Write from Caller${e} Checking for invalidation`),this.lock(),super.writeValue(e,t),this.unlock()}disconnect(e){super.disconnect(e)}postDisconnect(e){console.debug(`[OutPort${this.id}] Post Processing Disconnecting Wire${e}`),this.spreadValue(this.lastValue)}connect(e){console.debug(`[OutPort${this.id}] Connecting to Wire${e}`),super.connect(e)}getDrivers(e){return console.debug(`[OutPort${this.id}] Requested Drivers from Wire${e}`),this.isLocked()?[]:this.isDriving()?[this.id]:[]}}class tn extends Mn{constructor(t,s,o="",i){super(t,0,s,o);X(this,"callback");this.callback=i}readValue(t){return console.debug(`[InPort${this.id}] Value Requested from Caller${t}`),this.lm.isWire(t)&&this.type===0?"Z":super.readValue(t)}writeValue(t,s){if(console.debug(`[InPort${this.id}] Write Requested from Caller${t}`),this.lm.isComponent(t)&&this.type===0)throw Error("Tried to write InPort from inside a Component");this.lastValue!==s&&(super.writeValue(t,s),this.callback(this.id))}disconnect(t){console.debug(`[InPort${this.id}] Disconnecting from Wire${t}`),super.disconnect(t)}postDisconnect(t){this.writeValue(this.id,"Z")}getDrivers(t){return[]}}class $n extends He{constructor(e){super(e,"Unknown")}onInputChange(e){return[]}}let st=class extends He{constructor(e){super(e,"Sink"),this.addInputPin("Sink")}onInputChange(e){return[]}getValue(){return this.getInput(0).readValue(this.id)}},ot=class extends He{constructor(e){super(e,"Source"),this.addOutputPin("Source")}onInputChange(e){return[]}setValue(e){this.getOutput(0).writeValue(this.id,e)}};class Et extends He{constructor(e){super(e,"Inverter"),this.addInputPin("Q"),this.addOutputPin("Q'"),this.appearance=`
            <g class="fill-slate-500/40 stroke-2 stroke-black">
            <path d="M75.3021 47.6156L4.2193 87.546C2.2195 88.6694 -0.249997 87.2242 -0.249996 84.9305L-0.249993 5.06953C-0.249993 2.77581 2.2195 1.33058 4.21929 2.45396L75.302 42.3844C77.343 43.5309 77.343 46.4691 75.3021 47.6156Z"/>
            <circle fill="white" cx="82" cy="45" r="7" />
            </g>
        `,this.height=90,this.width=80,this.viewHeight=92,this.viewWidth=96}onInputChange(e){switch(e[0]){case"Z":return["X"];case"X":return["X"];case"1":return["0"];case"0":return["1"]}}}class It extends He{constructor(e){super(e,"AND"),this.addInputPin("A"),this.addInputPin("B"),this.addOutputPin("C"),this.appearance=`
            <g class="fill-slate-500/40 stroke-2 stroke-black">
                <path d="M4.82031 1.79858H46.5478C46.5733 1.80091 46.5991 1.80227 46.6251 1.80263C67.8013 2.09615 84.8203 18.8006 84.8203 39.2986C84.8203 59.7967 67.8013 76.5012 46.625 76.7947C46.5995 76.795 46.5741 76.7963 46.549 76.7986H46.0844L46.0709 76.7986H46.0583H46.0456L46.0321 76.7986H4.82031C3.16346 76.7986 1.82031 75.4554 1.82031 73.7986V4.79858C1.82031 3.14173 3.16346 1.79858 4.82031 1.79858ZM46.6349 76.7986H46.6251C46.6284 76.7985 46.6316 76.7986 46.6349 76.7986Z"/>
            </g>
        `,this.height=79,this.width=85,this.viewHeight=90,this.viewWidth=90}onInputChange(e){const t=e[0],s=e[1];return t==="0"||s==="0"?["0"]:t==="X"||t==="Z"||s==="X"||s==="Z"?["X"]:t==="1"&&s==="1"?["1"]:["0"]}}class Pt extends He{constructor(e){super(e,"OR"),this.addInputPin("A"),this.addInputPin("B"),this.addOutputPin("C"),this.appearance=`
            <g style="transform: translate(-9px, 0px)" class="fill-slate-500/40 stroke-2 stroke-black">
                <path d="M2.2195 3.91089L26.9224 3.91092C44.6733 3.91092 58.4162 11.4525 68.167 19.7425C77.9247 28.0384 83.6424 37.0508 85.3058 39.8792C85.4595 40.1406 85.4595 40.4564 85.3058 40.7178C83.6424 43.5462 77.9247 52.5586 68.167 60.8546C58.4162 69.1446 44.6733 76.6862 26.9224 76.6863L2.2191 76.6862C1.44112 76.6862 0.905982 75.8075 1.30388 75.0883C3.1363 71.7762 6.06626 66.139 8.54057 59.82C11.0069 53.5214 13.059 46.4504 13.059 40.2986C13.059 34.1467 11.0069 27.0757 8.54057 20.7772C6.06627 14.4581 3.1363 8.82093 1.30389 5.50887C0.906141 4.78995 1.4412 3.91089 2.2195 3.91089Z"/>
            </g>
        `,this.height=80,this.width=75,this.viewHeight=90,this.viewWidth=95}onInputChange(e){const t=e[0],s=e[1];return t==="1"||s==="1"?["1"]:t==="X"||t==="Z"||s==="X"||s==="Z"?["X"]:["0"]}}class Yn{constructor(){X(this,"wires",new Map);X(this,"components",new Map);X(this,"connectors",new Map);X(this,"id",0);X(this,"isLocked",!1)}filterWires(){const e=[];this.wires.forEach((t,s)=>{t.id===-1&&e.push(s)}),e.forEach(t=>this.wires.delete(t))}isWire(e){return this.wires.has(e)}isComponent(e){return this.components.has(e)}isConnector(e){return this.connectors.has(e)}getWire(e){const t=this.wires.get(e);if(t instanceof xt)return t;throw Error(`Wire with id ${e} doesn't exist`)}getComponent(e){const t=this.components.get(e);if(t instanceof He)return t;throw Error(`Component with id ${e} doesn't exist`)}getConnector(e){const t=this.connectors.get(e);if(t instanceof Sn)return t;throw Error(`Connector with id ${e} doesn't exist`)}addComponent(e){return this.components.set(e.id,e),e}addWire(e){return this.wires.set(e.id,e),this.filterWires(),e}addConnector(e){return this.connectors.set(e.id,e),e}createComponent(e){const t=new e(this);return this.addComponent(t),t}createConnector(e,t=null){if(this.isLocked)return-1;const s=new e(this);return s.id=t||s.id,this.addConnector(s),s.id}createWire(e,t){if(this.isLocked)return-1;const s=new xt(this,e,t);return this.filterWires(),s.id}createInPort(e,t,s,o=null){if(this.isLocked)return-1;const i=new tn(this,e,t,s);return i.id=o||i.id,this.connectors.set(i.id,i),i.id}createOutPort(e,t,s=null){if(this.isLocked)return-1;const o=new en(this,e,t);return o.id=s||o.id,this.connectors.set(o.id,o),o.id}getInPort(e){const t=this.connectors.get(e);if(t instanceof tn)return t;throw Error(`InPort with id ${e} doesn't exist`)}getOutPort(e){const t=this.connectors.get(e);if(t instanceof en)return t;throw Error(`OutPort with id ${e} doesn't exist`)}getDto(){const e=[];for(const o of this.wires.values())e.push({className:o.constructor.name,value:o});const t=[];for(const o of this.components.values())t.push({className:o.constructor.name,value:o,onInputChange:"return function "+o.onInputChange.toString()});const s=[];for(const o of this.connectors.values())s.push({className:o.constructor.name,value:o});return{wires:e,components:t,connectors:s}}fromDto(e){console.debug("DTO",e),this.wires.clear(),this.components.clear(),this.connectors.clear(),e.connectors.forEach(t=>{let s=-1;switch(t.value.type){case 0:s=this.createInPort(t.value.port_id,t.value.port_name,()=>{},t.value.id);break;case 1:s=this.createOutPort(t.value.port_id,t.value.port_name,t.value.id);break;case 2:s=this.createConnector(qn,t.value.id);break}if(s!=t.value.id)throw Error("Something went terribly wrong here");const o=this.getConnector(s);o.lastValue=t.value.lastValue}),e.components.forEach(t=>{let s;switch(t.className){case"Source":s=ot;break;case"Sink":s=st;break;case"Inverter":s=Et;break;case"AndGate":s=It;break;case"OrGate":s=Pt;break;default:s=$n;break}this.isLocked=!0;const o=this.createComponent(s);this.isLocked=!1,o.x=t.value.x,o.y=t.value.y,o.y=t.value.y,o.in_pins=t.value.in_pins,o.out_pins=t.value.out_pins,s.name==="Unknown"&&(o.appearance=t.value.appearance),o.in_pins.forEach(i=>{const l=this.getConnector(i);l.type===0&&(l.callback=o.onInputChange.bind(o))})}),e.wires.forEach(t=>{this.createWire(t.value.conA,t.value.conB)}),console.debug("LM",this)}}const Ne=fe(!1),Ie=fe(!1),Ae=fe(1),jn=fe(135/2),Wt=fe(!0),yt=fe(!1),Ye=fe(null),Be=fe(null),St=fe({x:0,y:0}),nn=fe({x:0,y:0}),Ht=fe({x:0,y:0}),Mt=fe(!1),Pe=fe(new Yn);function Jn(n){return n<.5?4*n*n*n:.5*Math.pow(2*n-2,3)+1}function Qn(n){const e=n-1;return e*e*e+1}function sn(n,{delay:e=0,duration:t=400,easing:s=Nn}={}){const o=+getComputedStyle(n).opacity;return{delay:e,duration:t,easing:s,css:i=>`opacity: ${i*o}`}}function on(n,{delay:e=0,duration:t=400,easing:s=Qn,x:o=0,y:i=0,opacity:l=0}={}){const r=getComputedStyle(n),a=+r.opacity,h=r.transform==="none"?"":r.transform,u=a*(1-l);return{delay:e,duration:t,easing:s,css:(_,g)=>`
			transform: ${h} translate(${(1-_)*o}px, ${(1-_)*i}px);
			opacity: ${a-u*g}`}}function ln(n){let e,t,s,o,i,l,r;const a=n[11].default,h=lt(a,n,n[10],null);return{c(){e=G("text"),h&&h.c(),this.h()},l(u){e=R(u,"text",{class:!0,"font-family":!0,"text-anchor":!0,"font-size":!0,"stroke-width":!0,"dominant-baseline":!0,x:!0,y:!0});var _=D(e);h&&h.l(_),_.forEach(b),this.h()},h(){c(e,"class",t="font-sans font-bold drop-shadow-md pointer-events-none "+n[4]),c(e,"font-family","sans"),c(e,"text-anchor",n[6]),c(e,"font-size",s=n[8]*n[9]),c(e,"stroke-width",n[9]),c(e,"dominant-baseline",n[7]),c(e,"x",o=n[0]+n[1]),c(e,"y",i=n[2]+n[3])},m(u,_){E(u,e,_),h&&h.m(e,null),r=!0},p(u,_){h&&h.p&&(!r||_&1024)&&rt(h,a,u,u[10],r?ht(a,u[10],_,null):at(u[10]),null),(!r||_&16&&t!==(t="font-sans font-bold drop-shadow-md pointer-events-none "+u[4]))&&c(e,"class",t),(!r||_&64)&&c(e,"text-anchor",u[6]),(!r||_&768&&s!==(s=u[8]*u[9]))&&c(e,"font-size",s),(!r||_&512)&&c(e,"stroke-width",u[9]),(!r||_&128)&&c(e,"dominant-baseline",u[7]),(!r||_&3&&o!==(o=u[0]+u[1]))&&c(e,"x",o),(!r||_&12&&i!==(i=u[2]+u[3]))&&c(e,"y",i)},i(u){r||(L(h,u),$e(()=>{l||(l=tt(e,sn,{},!0)),l.run(1)}),r=!0)},o(u){B(h,u),l||(l=tt(e,sn,{},!1)),l.run(0),r=!1},d(u){u&&b(e),h&&h.d(u),u&&l&&l.end()}}}function Fn(n){let e,t,s=n[5]&&ln(n);return{c(){s&&s.c(),e=se()},l(o){s&&s.l(o),e=se()},m(o,i){s&&s.m(o,i),E(o,e,i),t=!0},p(o,[i]){o[5]?s?(s.p(o,i),i&32&&L(s,1)):(s=ln(o),s.c(),L(s,1),s.m(e.parentNode,e)):s&&(Ve(),B(s,1,1,()=>{s=null}),Ee())},i(o){t||(L(s),t=!0)},o(o){B(s),t=!1},d(o){s&&s.d(o),o&&b(e)}}}function Kn(n,e,t){let s;N(n,Ae,f=>t(9,s=f));let{$$slots:o={},$$scope:i}=e,{x:l}=e,{x_offset:r=0}=e,{y:a}=e,{y_offset:h=0}=e,{classes:u="fill-rose-900"}=e,{show:_}=e,{text_anchor:g="middle"}=e,{text_baseline:m="middle"}=e,{font_size:v=20}=e;return n.$$set=f=>{"x"in f&&t(0,l=f.x),"x_offset"in f&&t(1,r=f.x_offset),"y"in f&&t(2,a=f.y),"y_offset"in f&&t(3,h=f.y_offset),"classes"in f&&t(4,u=f.classes),"show"in f&&t(5,_=f.show),"text_anchor"in f&&t(6,g=f.text_anchor),"text_baseline"in f&&t(7,m=f.text_baseline),"font_size"in f&&t(8,v=f.font_size),"$$scope"in f&&t(10,i=f.$$scope)},[l,r,a,h,u,_,g,m,v,s,i,o]}class je extends _e{constructor(e){super(),de(this,e,Kn,Fn,re,{x:0,x_offset:1,y:2,y_offset:3,classes:4,show:5,text_anchor:6,text_baseline:7,font_size:8})}}function rn(n){return Object.prototype.toString.call(n)==="[object Date]"}function Dt(n,e,t,s){if(typeof t=="number"||rn(t)){const o=s-t,i=(t-e)/(n.dt||1/60),l=n.opts.stiffness*o,r=n.opts.damping*i,a=(l-r)*n.inv_mass,h=(i+a)*n.dt;return Math.abs(h)<n.opts.precision&&Math.abs(o)<n.opts.precision?s:(n.settled=!1,rn(t)?new Date(t.getTime()+h):t+h)}else{if(Array.isArray(t))return t.map((o,i)=>Dt(n,e[i],t[i],s[i]));if(typeof t=="object"){const o={};for(const i in t)o[i]=Dt(n,e[i],t[i],s[i]);return o}else throw new Error(`Cannot spring ${typeof t} values`)}}function Ot(n,e={}){const t=fe(n),{stiffness:s=.15,damping:o=.8,precision:i=.01}=e;let l,r,a,h=n,u=n,_=1,g=0,m=!1;function v(C,k={}){u=C;const I=a={};return n==null||k.hard||f.stiffness>=1&&f.damping>=1?(m=!0,l=jt(),h=C,t.set(n=u),Promise.resolve()):(k.soft&&(g=1/((k.soft===!0?.5:+k.soft)*60),_=0),r||(l=jt(),m=!1,r=An(p=>{if(m)return m=!1,r=null,!1;_=Math.min(_+g,1);const d={inv_mass:_,opts:f,settled:!0,dt:(p-l)*60/1e3},y=Dt(d,h,n,u);return l=p,h=n,t.set(n=y),d.settled&&(r=null),!d.settled})),new Promise(p=>{r.promise.then(()=>{I===a&&p()})}))}const f={set:v,update:(C,k)=>v(C(u,n),k),subscribe:t.subscribe,stiffness:s,damping:o,precision:i};return f}function xn(n){let e,t=Math.round(n[3].x)+"",s,o,i=Math.round(n[3].y)+"",l,r;return{c(){e=H("x: "),s=H(t),o=H(" y: "),l=H(i),r=$()},l(a){e=M(a,"x: "),s=M(a,t),o=M(a," y: "),l=M(a,i),r=Y(a)},m(a,h){E(a,e,h),E(a,s,h),E(a,o,h),E(a,l,h),E(a,r,h)},p(a,h){h&8&&t!==(t=Math.round(a[3].x)+"")&&J(s,t),h&8&&i!==(i=Math.round(a[3].y)+"")&&J(l,i)},d(a){a&&b(e),a&&b(s),a&&b(o),a&&b(l),a&&b(r)}}}function an(n){let e;return{c(){e=G("circle"),this.h()},l(t){e=R(t,"circle",{class:!0,cx:!0,cy:!0,r:!0}),D(e).forEach(b),this.h()},h(){c(e,"class","fill-red-500"),c(e,"cx","0"),c(e,"cy","0"),c(e,"r","2")},m(t,s){E(t,e,s)},d(t){t&&b(e)}}}function es(n){let e,t,s,o,i,l,r,a,h;const u=n[17].default,_=lt(u,n,n[19],null);function g(f){n[18](f)}let m={x:0,y_offset:-15,y:0,text_anchor:"middle",text_baseline:"bottom",$$slots:{default:[xn]},$$scope:{ctx:n}};n[4]!==void 0&&(m.show=n[4]),t=new je({props:m}),le.push(()=>he(t,"show",g));let v=n[4]&&an();return{c(){e=G("svg"),_&&_.c(),Q(t.$$.fragment),v&&v.c(),this.h()},l(f){e=R(f,"svg",{x:!0,y:!0,viewBox:!0,width:!0,height:!0});var C=D(e);_&&_.l(C),F(t.$$.fragment,C),v&&v.l(C),C.forEach(b),this.h()},h(){c(e,"x",o=n[3].x-n[1]/2),c(e,"y",i=n[3].y-n[2]/2),c(e,"viewBox",l=-n[1]/2+" "+-n[2]/2+" "+(n[1]+2)+" "+n[2]),c(e,"width",n[1]),c(e,"height",n[2]),O(e,"cursor-grabbing",n[0]),O(e,"cursor-grab",!n[0])},m(f,C){E(f,e,C),_&&_.m(e,null),K(t,e,null),v&&v.m(e,null),r=!0,a||(h=[ne(window,"mouseup",n[7]),ne(window,"mousemove",n[8]),ne(e,"mousedown",n[6])],a=!0)},p(f,[C]){_&&_.p&&(!r||C&524288)&&rt(_,u,f,f[19],r?ht(u,f[19],C,null):at(f[19]),null);const k={};C&524296&&(k.$$scope={dirty:C,ctx:f}),!s&&C&16&&(s=!0,k.show=f[4],ue(()=>s=!1)),t.$set(k),f[4]?v||(v=an(),v.c(),v.m(e,null)):v&&(v.d(1),v=null),(!r||C&10&&o!==(o=f[3].x-f[1]/2))&&c(e,"x",o),(!r||C&12&&i!==(i=f[3].y-f[2]/2))&&c(e,"y",i),(!r||C&6&&l!==(l=-f[1]/2+" "+-f[2]/2+" "+(f[1]+2)+" "+f[2]))&&c(e,"viewBox",l),(!r||C&2)&&c(e,"width",f[1]),(!r||C&4)&&c(e,"height",f[2]),(!r||C&1)&&O(e,"cursor-grabbing",f[0]),(!r||C&1)&&O(e,"cursor-grab",!f[0])},i(f){r||(L(_,f),L(t.$$.fragment,f),r=!0)},o(f){B(_,f),B(t.$$.fragment,f),r=!1},d(f){f&&b(e),_&&_.d(f),x(t),v&&v.d(),a=!1,ut(h)}}}function ts(n,e,t){let s,o,i,l,r;N(n,Wt,z=>t(16,o=z)),N(n,Ae,z=>t(20,i=z)),N(n,jn,z=>t(21,l=z)),N(n,Ne,z=>t(4,r=z));let{$$slots:a={},$$scope:h}=e,{width:u}=e,{height:_}=e,{viewWidth:g}=e,{viewHeight:m}=e,{isDragging:v=!1}=e,{init_x:f}=e,{init_y:C}=e,k=f,I=C,{position:p={x:k,y:I}}=e,d=Ot({x:k,y:I},{stiffness:.5,damping:.5});N(n,d,z=>t(3,s=z));function y(z){return o?Math.round(z/l)*l:z}function U(z){console.debug("[NodeBase] Drag Started"),t(0,v=!0)}function W(z){console.debug("[NodeBase] Drag Stopped"),t(0,v=!1),t(14,k=s.x),t(15,I=s.y)}function q(z){v&&(t(14,k+=z.movementX*i),t(15,I+=z.movementY*i))}function ae(z){r=z,Ne.set(r)}return n.$$set=z=>{"width"in z&&t(10,u=z.width),"height"in z&&t(11,_=z.height),"viewWidth"in z&&t(1,g=z.viewWidth),"viewHeight"in z&&t(2,m=z.viewHeight),"isDragging"in z&&t(0,v=z.isDragging),"init_x"in z&&t(12,f=z.init_x),"init_y"in z&&t(13,C=z.init_y),"position"in z&&t(9,p=z.position),"$$scope"in z&&t(19,h=z.$$scope)},n.$$.update=()=>{n.$$.dirty&114688&&(o?me(d,s={x:y(k),y:y(I)},s):me(d,s={x:k,y:I},s)),n.$$.dirty&8&&t(9,p=s)},[v,g,m,s,r,d,U,W,q,p,u,_,f,C,k,I,o,a,ae,h]}class ns extends _e{constructor(e){super(),de(this,e,ts,es,re,{width:10,height:11,viewWidth:1,viewHeight:2,isDragging:0,init_x:12,init_y:13,position:9})}}function hn(n,e,t){const s=n.slice();return s[4]=e[t],s}function un(n){let e,t=n[4]+"",s;return{c(){e=ee("p"),s=H(t)},l(o){e=te(o,"P",{});var i=D(e);s=M(i,t),i.forEach(b)},m(o,i){E(o,e,i),V(e,s)},p(o,i){i&1&&t!==(t=o[4]+"")&&J(s,t)},d(o){o&&b(e)}}}function ss(n){let e,t=n[0],s=[];for(let o=0;o<t.length;o+=1)s[o]=un(hn(n,t,o));return{c(){e=ee("div");for(let o=0;o<s.length;o+=1)s[o].c();this.h()},l(o){e=te(o,"DIV",{class:!0,role:!0,style:!0});var i=D(e);for(let l=0;l<s.length;l+=1)s[l].l(i);i.forEach(b),this.h()},h(){c(e,"class","tooltip pointer-events-none svelte-fl3jqw"),c(e,"role","tooltip"),we(e,"left",n[1]+"px"),we(e,"top",n[2]+"px"),O(e,"opacity-0",n[3])},m(o,i){E(o,e,i);for(let l=0;l<s.length;l+=1)s[l].m(e,null)},p(o,[i]){if(i&1){t=o[0];let l;for(l=0;l<t.length;l+=1){const r=hn(o,t,l);s[l]?s[l].p(r,i):(s[l]=un(r),s[l].c(),s[l].m(e,null))}for(;l<s.length;l+=1)s[l].d(1);s.length=t.length}i&2&&we(e,"left",o[1]+"px"),i&4&&we(e,"top",o[2]+"px"),i&8&&O(e,"opacity-0",o[3])},i:Se,o:Se,d(o){o&&b(e),nt(s,o)}}}function os(n,e,t){let{tooltipText:s}=e,{xAxis:o}=e,{yAxis:i}=e,l=!0;return Pn(()=>{setTimeout(()=>{t(3,l=!1)},700)}),n.$$set=r=>{"tooltipText"in r&&t(0,s=r.tooltipText),"xAxis"in r&&t(1,o=r.xAxis),"yAxis"in r&&t(2,i=r.yAxis)},[s,o,i,l]}class is extends _e{constructor(e){super(),de(this,e,os,ss,re,{tooltipText:0,xAxis:1,yAxis:2})}}function fn(...n){let e=[];for(let t of n)e.push('"'+t+'"');return"["+e.toString()+"]"}const ls=n=>{let e,t;const s=()=>{e=n.getAttribute("data-tooltip"),e=JSON.parse(e),t=new is({target:document.body,props:{tooltipText:e,xAxis:0,yAxis:0}});const i=document.querySelectorAll(".tooltip");let l=n.getBoundingClientRect();i.forEach(r=>{n.offsetWidth===void 0&&(n.offsetWidth=0);let a=parseInt(l.top+l.bottom)/2+window.scrollY-r.offsetHeight-10,h=l.left+window.scrollX+(n.offsetWidth-r.offsetWidth)/2+l.width/2-2;t.$set({xAxis:h,yAxis:a})})},o=()=>{t.$destroy()};return n.addEventListener("mouseover",s),n.addEventListener("mouseout",o),{destroy(){n.removeEventListener("mouseover",s),n.removeEventListener("mouseout",o)}}};function cn(n){let e,t,s;return{c(){e=G("text"),t=H(n[13]),this.h()},l(o){e=R(o,"text",{class:!0,"font-family":!0,"text-anchor":!0,"dominant-baseline":!0,x:!0,y:!0});var i=D(e);t=M(i,n[13]),i.forEach(b),this.h()},h(){c(e,"class","fill-gray-500"),c(e,"font-family","sans"),c(e,"text-anchor",n[9]),c(e,"dominant-baseline","middle"),c(e,"x",s=n[0]+n[8]),c(e,"y",n[1])},m(o,i){E(o,e,i),V(e,t)},p(o,i){i&512&&c(e,"text-anchor",o[9]),i&257&&s!==(s=o[0]+o[8])&&c(e,"x",s),i&2&&c(e,"y",o[1])},d(o){o&&b(e)}}}function rs(n){let e,t=Math.round(n[4].x)+"",s,o,i=Math.round(n[4].y)+"",l;return{c(){e=H("x: "),s=H(t),o=H(" y: "),l=H(i)},l(r){e=M(r,"x: "),s=M(r,t),o=M(r," y: "),l=M(r,i)},m(r,a){E(r,e,a),E(r,s,a),E(r,o,a),E(r,l,a)},p(r,a){a&16&&t!==(t=Math.round(r[4].x)+"")&&J(s,t),a&16&&i!==(i=Math.round(r[4].y)+"")&&J(l,i)},d(r){r&&b(e),r&&b(s),r&&b(o),r&&b(l)}}}function as(n){let e=n[4].id+"",t;return{c(){t=H(e)},l(s){t=M(s,e)},m(s,o){E(s,t,o)},p(s,o){o&16&&e!==(e=s[4].id+"")&&J(t,e)},d(s){s&&b(t)}}}function hs(n){let e,t,s,o,i,l,r,a,h,u,_,g,m,v,f,C,k,I,p,d=n[13]!==null&&n[3]&&cn(n);function y(w){n[19](w)}function U(w){n[20](w)}function W(w){n[21](w)}let q={x_offset:-2*n[8],text_anchor:n[4].type===ve.IN?"end":"start",$$slots:{default:[rs]},$$scope:{ctx:n}};n[0]!==void 0&&(q.x=n[0]),n[1]!==void 0&&(q.y=n[1]),n[10]!==void 0&&(q.show=n[10]),a=new je({props:q}),le.push(()=>he(a,"x",y)),le.push(()=>he(a,"y",U)),le.push(()=>he(a,"show",W));function ae(w){n[22](w)}function z(w){n[23](w)}function oe(w){n[24](w)}let P={y_offset:20,classes:"fill-white stroke-black",$$slots:{default:[as]},$$scope:{ctx:n}};return n[11]!==void 0&&(P.show=n[11]),n[0]!==void 0&&(P.x=n[0]),n[1]!==void 0&&(P.y=n[1]),m=new je({props:P}),le.push(()=>he(m,"show",ae)),le.push(()=>he(m,"x",z)),le.push(()=>he(m,"y",oe)),{c(){e=G("g"),t=G("circle"),l=$(),d&&d.c(),r=$(),Q(a.$$.fragment),g=$(),Q(m.$$.fragment),this.h()},l(w){e=R(w,"g",{});var Z=D(e);t=R(Z,"circle",{"data-tooltip":!0,id:!0,class:!0,cx:!0,cy:!0,r:!0}),D(t).forEach(b),Z.forEach(b),l=Y(w),d&&d.l(w),r=Y(w),F(a.$$.fragment,w),g=Y(w),F(m.$$.fragment,w),this.h()},h(){c(t,"data-tooltip",s=fn("Value: "+n[4].lastValue,"Driver: "+n[4].isDriving())),c(t,"id",o=n[2].port_name),c(t,"class",i=(n[7]?"fill-transparent":n[5]?"fill-red-500/40":"fill-lime-600/40")+" "+(n[6]?"hover:fill-blue-400":n[5]?"hover:fill-red-500":"hover:fill-lime-600")+" hover:stroke-black/40 transition-colors ease-in-out duration-100 cursor-pointer"),c(t,"cx",n[0]),c(t,"cy",n[1]),c(t,"r",us)},m(w,Z){E(w,e,Z),V(e,t),E(w,l,Z),d&&d.m(w,Z),E(w,r,Z),K(a,w,Z),E(w,g,Z),K(m,w,Z),k=!0,I||(p=[ne(window,"mouseup",n[15]),Bn(ls.call(null,t)),ne(e,"mousedown",n[14]),ne(e,"mouseenter",n[16]),ne(e,"mouseleave",n[17])],I=!0)},p(w,[Z]){(!k||Z&16&&s!==(s=fn("Value: "+w[4].lastValue,"Driver: "+w[4].isDriving())))&&c(t,"data-tooltip",s),(!k||Z&4&&o!==(o=w[2].port_name))&&c(t,"id",o),(!k||Z&224&&i!==(i=(w[7]?"fill-transparent":w[5]?"fill-red-500/40":"fill-lime-600/40")+" "+(w[6]?"hover:fill-blue-400":w[5]?"hover:fill-red-500":"hover:fill-lime-600")+" hover:stroke-black/40 transition-colors ease-in-out duration-100 cursor-pointer"))&&c(t,"class",i),(!k||Z&1)&&c(t,"cx",w[0]),(!k||Z&2)&&c(t,"cy",w[1]),w[13]!==null&&w[3]?d?d.p(w,Z):(d=cn(w),d.c(),d.m(r.parentNode,r)):d&&(d.d(1),d=null);const S={};Z&256&&(S.x_offset=-2*w[8]),Z&16&&(S.text_anchor=w[4].type===ve.IN?"end":"start"),Z&67108880&&(S.$$scope={dirty:Z,ctx:w}),!h&&Z&1&&(h=!0,S.x=w[0],ue(()=>h=!1)),!u&&Z&2&&(u=!0,S.y=w[1],ue(()=>u=!1)),!_&&Z&1024&&(_=!0,S.show=w[10],ue(()=>_=!1)),a.$set(S);const ce={};Z&67108880&&(ce.$$scope={dirty:Z,ctx:w}),!v&&Z&2048&&(v=!0,ce.show=w[11],ue(()=>v=!1)),!f&&Z&1&&(f=!0,ce.x=w[0],ue(()=>f=!1)),!C&&Z&2&&(C=!0,ce.y=w[1],ue(()=>C=!1)),m.$set(ce)},i(w){k||(L(a.$$.fragment,w),L(m.$$.fragment,w),k=!0)},o(w){B(a.$$.fragment,w),B(m.$$.fragment,w),k=!1},d(w){w&&b(e),w&&b(l),d&&d.d(w),w&&b(r),x(a,w),w&&b(g),x(m,w),I=!1,ut(p)}}}const us=8,_n=7;function fs(n,e,t){let s,o,i,l;N(n,yt,w=>t(18,o=w)),N(n,Ne,w=>t(10,i=w)),N(n,Ie,w=>t(11,l=w));let{pos_x:r}=e,{pos_y:a}=e,{port_node:h}=e,{show_labels:u=!0}=e;const _=h.getStore();N(n,_,w=>t(4,s=w));const g=h.port_name;let m=!1,v=!1,f=!1,C,k;switch(s.type){case ve.IN:{C=_n,k="start";break}case ve.OUT:{C=-_n,k="end";break}}const I=Wn();function p(w){console.debug("[Port] Was clicked"),t(5,m=!0),yt.set(!0),Ye.set(h)}function d(w){console.debug("[Port] Connection was cancelled"),m&&(t(5,m=!1),I("cancel_port_connect",null),yt.set(!1))}function y(w){!m&&o&&(console.debug(`[Port] Selected ${h.port_name} as secondary`),t(6,v=!0),Be.set(h))}function U(w){!m&&o&&Be.set(null),t(6,v=!1)}function W(w){r=w,t(0,r)}function q(w){a=w,t(1,a)}function ae(w){i=w,Ne.set(i)}function z(w){l=w,Ie.set(l)}function oe(w){r=w,t(0,r)}function P(w){a=w,t(1,a)}return n.$$set=w=>{"pos_x"in w&&t(0,r=w.pos_x),"pos_y"in w&&t(1,a=w.pos_y),"port_node"in w&&t(2,h=w.port_node),"show_labels"in w&&t(3,u=w.show_labels)},n.$$.update=()=>{n.$$.dirty&1&&me(_,s.x=r,s),n.$$.dirty&2&&me(_,s.y=a,s),n.$$.dirty&262144&&(o||(t(6,v=!1),t(5,m=!1))),n.$$.dirty&20&&h.type===ve.IN&&t(7,f=s.connections.length>0)},[r,a,h,u,s,m,v,f,C,k,i,l,_,g,p,d,y,U,o,W,q,ae,z,oe,P]}class Dn extends _e{constructor(e){super(),de(this,e,fs,hs,re,{pos_x:0,pos_y:1,port_node:2,show_labels:3})}}function dn(n,e,t){const s=n.slice();return s[25]=e[t],s[27]=t,s}function vn(n,e,t){const s=n.slice();return s[25]=e[t],s[27]=t,s}function cs(n){let e,t,s;return{c(){e=G("rect"),this.h()},l(o){e=R(o,"rect",{class:!0,x:!0,y:!0,rx:!0,ry:!0,width:!0,height:!0}),D(e).forEach(b),this.h()},h(){c(e,"class","fill-white stroke-black stroke-2"),c(e,"x",t=-n[6]/2),c(e,"y",s=-n[5]/2),c(e,"rx","10"),c(e,"ry","10"),c(e,"width",n[3]),c(e,"height",n[4])},m(o,i){E(o,e,i)},p(o,i){i&64&&t!==(t=-o[6]/2)&&c(e,"x",t),i&32&&s!==(s=-o[5]/2)&&c(e,"y",s),i&8&&c(e,"width",o[3]),i&16&&c(e,"height",o[4])},d(o){o&&b(e)}}}function _s(n){let e,t=n[8].appearance+"";return{c(){e=G("g"),this.h()},l(s){e=R(s,"g",{style:!0});var o=D(e);o.forEach(b),this.h()},h(){we(e,"transform","translate("+-n[3]/2+"px, "+-n[4]/2+"px)")},m(s,o){E(s,e,o),e.innerHTML=t},p(s,o){o&256&&t!==(t=s[8].appearance+"")&&(e.innerHTML=t),o&24&&we(e,"transform","translate("+-s[3]/2+"px, "+-s[4]/2+"px)")},d(s){s&&b(e)}}}function ds(n){let e;function t(i,l){return i[8].appearance!=""?_s:cs}let s=t(n),o=s(n);return{c(){o.c(),e=se()},l(i){o.l(i),e=se()},m(i,l){o.m(i,l),E(i,e,l)},p(i,l){s===(s=t(i))&&o?o.p(i,l):(o.d(1),o=s(i),o&&(o.c(),o.m(e.parentNode,e)))},d(i){o.d(i),i&&b(e)}}}function mn(n){let e,t=n[0].name+"",s,o;return{c(){e=G("text"),s=H(t),this.h()},l(i){e=R(i,"text",{class:!0,"dominant-baseline":!0,"text-anchor":!0,x:!0,y:!0});var l=D(e);s=M(l,t),l.forEach(b),this.h()},h(){c(e,"class","fill-gray-500"),c(e,"dominant-baseline","hanging"),c(e,"text-anchor","middle"),c(e,"x",0),c(e,"y",o=2-n[4]/2)},m(i,l){E(i,e,l),V(e,s)},p(i,l){l&1&&t!==(t=i[0].name+"")&&J(s,t),l&16&&o!==(o=2-i[4]/2)&&c(e,"y",o)},d(i){i&&b(e)}}}function vs(n){let e,t,s;const o=n[14].default,i=lt(o,n,n[23],null),l=i||ds(n);let r=n[2]&&mn(n);return{c(){l&&l.c(),e=$(),r&&r.c(),t=se()},l(a){l&&l.l(a),e=Y(a),r&&r.l(a),t=se()},m(a,h){l&&l.m(a,h),E(a,e,h),r&&r.m(a,h),E(a,t,h),s=!0},p(a,h){i?i.p&&(!s||h&8388608)&&rt(i,o,a,a[23],s?ht(o,a[23],h,null):at(a[23]),null):l&&l.p&&(!s||h&376)&&l.p(a,s?h:-1),a[2]?r?r.p(a,h):(r=mn(a),r.c(),r.m(t.parentNode,t)):r&&(r.d(1),r=null)},i(a){s||(L(l,a),s=!0)},o(a){B(l,a),s=!1},d(a){l&&l.d(a),a&&b(e),r&&r.d(a),a&&b(t)}}}function gn(n){let e,t,s;function o(l){n[16](l)}let i={port_node:n[9].getInPort(n[25]),pos_x:n[7].x-n[3]/2,pos_y:n[7].y+it(n[27],n[12],n[4])-n[4]/2};return n[1]!==void 0&&(i.show_labels=n[1]),e=new Dn({props:i}),le.push(()=>he(e,"show_labels",o)),e.$on("start_port_connect",n[17]),e.$on("cancel_port_connect",n[18]),{c(){Q(e.$$.fragment)},l(l){F(e.$$.fragment,l)},m(l,r){K(e,l,r),s=!0},p(l,r){const a={};r&768&&(a.port_node=l[9].getInPort(l[25])),r&136&&(a.pos_x=l[7].x-l[3]/2),r&144&&(a.pos_y=l[7].y+it(l[27],l[12],l[4])-l[4]/2),!t&&r&2&&(t=!0,a.show_labels=l[1],ue(()=>t=!1)),e.$set(a)},i(l){s||(L(e.$$.fragment,l),s=!0)},o(l){B(e.$$.fragment,l),s=!1},d(l){x(e,l)}}}function pn(n){let e,t,s;function o(l){n[19](l)}let i={port_node:n[9].getOutPort(n[25]),pos_x:n[7].x+n[3]/2,pos_y:n[7].y+it(n[27],n[13],n[4])-n[4]/2};return n[1]!==void 0&&(i.show_labels=n[1]),e=new Dn({props:i}),le.push(()=>he(e,"show_labels",o)),e.$on("start_port_connect",n[20]),e.$on("cancel_port_connect",n[21]),{c(){Q(e.$$.fragment)},l(l){F(e.$$.fragment,l)},m(l,r){K(e,l,r),s=!0},p(l,r){const a={};r&768&&(a.port_node=l[9].getOutPort(l[25])),r&136&&(a.pos_x=l[7].x+l[3]/2),r&144&&(a.pos_y=l[7].y+it(l[27],l[13],l[4])-l[4]/2),!t&&r&2&&(t=!0,a.show_labels=l[1],ue(()=>t=!1)),e.$set(a)},i(l){s||(L(e.$$.fragment,l),s=!0)},o(l){B(e.$$.fragment,l),s=!1},d(l){x(e,l)}}}function ms(n){let e=n[8].id+"",t;return{c(){t=H(e)},l(s){t=M(s,e)},m(s,o){E(s,t,o)},p(s,o){o&256&&e!==(e=s[8].id+"")&&J(t,e)},d(s){s&&b(t)}}}function gs(n){let e,t,s,o,i,l,r,a;function h(p){n[15](p)}let u={init_x:n[0].x,init_y:n[0].y,width:n[3],height:n[4],viewHeight:n[5],viewWidth:n[6],$$slots:{default:[vs]},$$scope:{ctx:n}};n[7]!==void 0&&(u.position=n[7]),e=new ns({props:u}),le.push(()=>he(e,"position",h));let _=n[8].in_pins,g=[];for(let p=0;p<_.length;p+=1)g[p]=gn(vn(n,_,p));const m=p=>B(g[p],1,1,()=>{g[p]=null});let v=n[8].out_pins,f=[];for(let p=0;p<v.length;p+=1)f[p]=pn(dn(n,v,p));const C=p=>B(f[p],1,1,()=>{f[p]=null});function k(p){n[22](p)}let I={x:n[7].x,y:n[7].y+n[4]/2,y_offset:0,text_baseline:"hanging",classes:"fill-white stroke-black",$$slots:{default:[ms]},$$scope:{ctx:n}};return n[10]!==void 0&&(I.show=n[10]),l=new je({props:I}),le.push(()=>he(l,"show",k)),{c(){Q(e.$$.fragment),s=$();for(let p=0;p<g.length;p+=1)g[p].c();o=$();for(let p=0;p<f.length;p+=1)f[p].c();i=$(),Q(l.$$.fragment)},l(p){F(e.$$.fragment,p),s=Y(p);for(let d=0;d<g.length;d+=1)g[d].l(p);o=Y(p);for(let d=0;d<f.length;d+=1)f[d].l(p);i=Y(p),F(l.$$.fragment,p)},m(p,d){K(e,p,d),E(p,s,d);for(let y=0;y<g.length;y+=1)g[y].m(p,d);E(p,o,d);for(let y=0;y<f.length;y+=1)f[y].m(p,d);E(p,i,d),K(l,p,d),a=!0},p(p,[d]){const y={};if(d&1&&(y.init_x=p[0].x),d&1&&(y.init_y=p[0].y),d&8&&(y.width=p[3]),d&16&&(y.height=p[4]),d&32&&(y.viewHeight=p[5]),d&64&&(y.viewWidth=p[6]),d&8388989&&(y.$$scope={dirty:d,ctx:p}),!t&&d&128&&(t=!0,y.position=p[7],ue(()=>t=!1)),e.$set(y),d&5018){_=p[8].in_pins;let W;for(W=0;W<_.length;W+=1){const q=vn(p,_,W);g[W]?(g[W].p(q,d),L(g[W],1)):(g[W]=gn(q),g[W].c(),L(g[W],1),g[W].m(o.parentNode,o))}for(Ve(),W=_.length;W<g.length;W+=1)m(W);Ee()}if(d&9114){v=p[8].out_pins;let W;for(W=0;W<v.length;W+=1){const q=dn(p,v,W);f[W]?(f[W].p(q,d),L(f[W],1)):(f[W]=pn(q),f[W].c(),L(f[W],1),f[W].m(i.parentNode,i))}for(Ve(),W=v.length;W<f.length;W+=1)C(W);Ee()}const U={};d&128&&(U.x=p[7].x),d&144&&(U.y=p[7].y+p[4]/2),d&8388864&&(U.$$scope={dirty:d,ctx:p}),!r&&d&1024&&(r=!0,U.show=p[10],ue(()=>r=!1)),l.$set(U)},i(p){if(!a){L(e.$$.fragment,p);for(let d=0;d<_.length;d+=1)L(g[d]);for(let d=0;d<v.length;d+=1)L(f[d]);L(l.$$.fragment,p),a=!0}},o(p){B(e.$$.fragment,p),g=g.filter(Boolean);for(let d=0;d<g.length;d+=1)B(g[d]);f=f.filter(Boolean);for(let d=0;d<f.length;d+=1)B(f[d]);B(l.$$.fragment,p),a=!1},d(p){x(e,p),p&&b(s),nt(g,p),p&&b(o),nt(f,p),p&&b(i),x(l,p)}}}const Lt=26;function it(n,e,t){const s=(t+Lt)/(e+1);return(n+1)*s-Lt/2}function ps(n,e,t){let s,o,i;N(n,Pe,P=>t(9,o=P)),N(n,Ie,P=>t(10,i=P));let{$$slots:l={},$$scope:r}=e,{abstract_node:a}=e;const h=a.getStore();N(n,h,P=>t(8,s=P));let u=s.in_pins.length,_=s.out_pins.length,{show_name:g=a.showNames}=e,{show_labels:m=a.showLabels}=e;const v=s.appearance!=="";let{width:f=s.width}=e,{height:C=v?s.height:(Math.max(u,_)+2)*Lt}=e,{viewHeight:k=s.viewHeight}=e,{viewWidth:I=s.viewWidth}=e,p={x:a.x,y:a.y};function d(P){p=P,t(7,p)}function y(P){m=P,t(1,m)}function U(P){Oe.call(this,n,P)}function W(P){Oe.call(this,n,P)}function q(P){m=P,t(1,m)}function ae(P){Oe.call(this,n,P)}function z(P){Oe.call(this,n,P)}function oe(P){i=P,Ie.set(i)}return n.$$set=P=>{"abstract_node"in P&&t(0,a=P.abstract_node),"show_name"in P&&t(2,g=P.show_name),"show_labels"in P&&t(1,m=P.show_labels),"width"in P&&t(3,f=P.width),"height"in P&&t(4,C=P.height),"viewHeight"in P&&t(5,k=P.viewHeight),"viewWidth"in P&&t(6,I=P.viewWidth),"$$scope"in P&&t(23,r=P.$$scope)},n.$$.update=()=>{n.$$.dirty&128&&(t(0,a.x=p.x,a),t(0,a.y=p.y,a))},[a,m,g,f,C,k,I,p,s,o,i,h,u,_,l,d,y,U,W,q,ae,z,oe,r]}class Zt extends _e{constructor(e){super(),de(this,e,ps,gs,re,{abstract_node:0,show_name:2,show_labels:1,width:3,height:4,viewHeight:5,viewWidth:6})}}function wn(n,e,t){const s=n.slice();return s[9]=e[t],s[11]=t,s}function bn(n){let e,t,s,o=n[1].lastValue+"",i,l,r;return{c(){e=G("g"),t=G("rect"),s=G("text"),i=H(o),this.h()},l(a){e=R(a,"g",{});var h=D(e);t=R(h,"rect",{class:!0,x:!0,y:!0,width:!0,height:!0}),D(t).forEach(b),s=R(h,"text",{class:!0,"font-size":!0,"font-family":!0,"text-anchor":!0,"dominant-baseline":!0,x:!0,y:!0});var u=D(s);i=M(u,o),u.forEach(b),h.forEach(b),this.h()},h(){c(t,"class","stroke-black stroke-2 transition-colors"),c(t,"x",-Ce/2),c(t,"y",-Ce-n[6]/2),c(t,"width",Ce),c(t,"height",Ce),O(t,"fill-w_high",n[1].lastValue===A.HIGH),O(t,"fill-w_low",n[1].lastValue===A.LOW),O(t,"fill-w_x",n[1].lastValue===A.X),O(t,"fill-w_z",n[1].lastValue===A.Z),O(t,"opacity-25",n[1].lastValue===A.Z),c(s,"class","fill-black"),c(s,"font-size",20),c(s,"font-family","mono"),c(s,"text-anchor","middle"),c(s,"dominant-baseline","middle"),c(s,"x",0),c(s,"y",-n[6]/2-Ce/2)},m(a,h){E(a,e,h),V(e,t),V(e,s),V(s,i),r=!0},p(a,h){n=a,(!r||h&2)&&O(t,"fill-w_high",n[1].lastValue===A.HIGH),(!r||h&2)&&O(t,"fill-w_low",n[1].lastValue===A.LOW),(!r||h&2)&&O(t,"fill-w_x",n[1].lastValue===A.X),(!r||h&2)&&O(t,"fill-w_z",n[1].lastValue===A.Z),(!r||h&2)&&O(t,"opacity-25",n[1].lastValue===A.Z),(!r||h&2)&&o!==(o=n[1].lastValue+"")&&J(i,o)},i(a){r||($e(()=>{l||(l=tt(e,on,{y:Ce,duration:400},!0)),l.run(1)}),r=!0)},o(a){l||(l=tt(e,on,{y:Ce,duration:400},!1)),l.run(0),r=!1},d(a){a&&b(e),a&&l&&l.end()}}}function kn(n){let e,t,s,o=n[9]+"",i,l,r;function a(...h){return n[7](n[9],...h)}return{c(){e=G("g"),t=G("rect"),s=G("text"),i=H(o),this.h()},l(h){e=R(h,"g",{class:!0});var u=D(e);t=R(u,"rect",{class:!0,x:!0,y:!0,width:!0,height:!0}),D(t).forEach(b),s=R(u,"text",{class:!0,x:!0,y:!0,"font-size":!0,"font-family":!0,"text-anchor":!0,"dominant-baseline":!0});var _=D(s);i=M(_,o),_.forEach(b),u.forEach(b),this.h()},h(){c(t,"class","stroke-black stroke-2"),c(t,"x",n[11]%2*(n[5]-pe)/2+pe/2-n[5]/2),c(t,"y",+(n[11]>1)*(n[6]-pe)/2+pe/2-n[6]/2),c(t,"width",Le),c(t,"height",Le),c(s,"class","fill-white"),c(s,"x",n[11]%2*(n[5]-pe)/2+pe/2+Le/2-n[5]/2),c(s,"y",+(n[11]>1)*(n[6]-pe)/2+pe/2+Le/2-n[6]/2),c(s,"font-size",20),c(s,"font-family","mono"),c(s,"text-anchor","middle"),c(s,"dominant-baseline","middle"),c(e,"class","hover:fill-blue-500 fill-gray-700 transition duration-100 ease-in-out cursor-pointer")},m(h,u){E(h,e,u),V(e,t),V(e,s),V(s,i),l||(r=ne(e,"mousedown",a),l=!0)},p(h,u){n=h},d(h){h&&b(e),l=!1,r()}}}function ws(n){let e=n[1].lastValue,t,s,o,i,l,r=bn(n),a=[A.Z,A.X,A.LOW,A.HIGH],h=[];for(let u=0;u<4;u+=1)h[u]=kn(wn(n,a,u));return{c(){r.c(),t=$(),s=G("rect"),o=$();for(let u=0;u<4;u+=1)h[u].c();i=se(),this.h()},l(u){r.l(u),t=Y(u),s=R(u,"rect",{class:!0,rx:!0,ry:!0,x:!0,y:!0,width:!0,height:!0}),D(s).forEach(b),o=Y(u);for(let _=0;_<4;_+=1)h[_].l(u);i=se(),this.h()},h(){c(s,"class","fill-slate-700/30 stroke-black stroke-2"),c(s,"rx","10"),c(s,"ry","10"),c(s,"x",-n[5]/2),c(s,"y",-n[6]/2),c(s,"width",n[5]),c(s,"height",n[6])},m(u,_){r.m(u,_),E(u,t,_),E(u,s,_),E(u,o,_);for(let g=0;g<4;g+=1)h[g].m(u,_);E(u,i,_),l=!0},p(u,_){if(_&2&&re(e,e=u[1].lastValue)?(Ve(),B(r,1,1,Se),Ee(),r=bn(u),r.c(),L(r,1),r.m(t.parentNode,t)):r.p(u,_),_&100){a=[A.Z,A.X,A.LOW,A.HIGH];let g;for(g=0;g<4;g+=1){const m=wn(u,a,g);h[g]?h[g].p(m,_):(h[g]=kn(m),h[g].c(),h[g].m(i.parentNode,i))}for(;g<4;g+=1)h[g].d(1)}},i(u){l||(L(r),l=!0)},o(u){B(r),l=!1},d(u){r.d(u),u&&b(t),u&&b(s),u&&b(o),nt(h,u),u&&b(i)}}}function bs(n){let e,t;return e=new Zt({props:{width:n[5],height:n[6],viewHeight:n[6]+2*Ce,show_labels:!1,show_name:!1,abstract_node:n[0],$$slots:{default:[ws]},$$scope:{ctx:n}}}),e.$on("cancel_port_connect",n[8]),{c(){Q(e.$$.fragment)},l(s){F(e.$$.fragment,s)},m(s,o){K(e,s,o),t=!0},p(s,[o]){const i={};o&1&&(i.abstract_node=s[0]),o&4102&&(i.$$scope={dirty:o,ctx:s}),e.$set(i)},i(s){t||(L(e.$$.fragment,s),t=!0)},o(s){B(e.$$.fragment,s),t=!1},d(s){x(e,s)}}}const Ce=30,Le=30,pe=20;function ks(n,e,t){let s,o,{abstract_node:i}=e;const l=i.getStore();N(n,l,g=>t(2,o=g));const r=i.getOutput(0).getStore();N(n,r,g=>t(1,s=g));let a=Le*2+pe,h=Le*2+pe;const u=(g,m)=>{o.setValue(g)};function _(g){Oe.call(this,n,g)}return n.$$set=g=>{"abstract_node"in g&&t(0,i=g.abstract_node)},[i,s,o,l,r,a,h,u,_]}class zs extends _e{constructor(e){super(),de(this,e,ks,bs,re,{abstract_node:0})}}function zn(n){let e,t,s,o,i,l=n[1].lastValue+"",r,a,h,u;return{c(){e=G("g"),t=G("rect"),i=G("text"),r=H(l),this.h()},l(_){e=R(_,"g",{});var g=D(e);t=R(g,"rect",{class:!0,x:!0,y:!0,width:!0,height:!0}),D(t).forEach(b),i=R(g,"text",{class:!0,"font-size":!0,"font-family":!0,"text-anchor":!0,"dominant-baseline":!0,x:!0,y:!0});var m=D(i);r=M(m,l),m.forEach(b),g.forEach(b),this.h()},h(){c(t,"class","stroke-black stroke-2 transition-colors"),c(t,"x",-et/2),c(t,"y",-et/2),c(t,"width",et),c(t,"height",et),O(t,"fill-w_high",n[1].lastValue===A.HIGH),O(t,"fill-w_low",n[1].lastValue===A.LOW),O(t,"fill-w_x",n[1].lastValue===A.X),O(t,"fill-w_z",n[1].lastValue===A.Z),O(t,"opacity-25",n[1].lastValue===A.Z),c(i,"class","fill-black"),c(i,"font-size",20),c(i,"font-family","mono"),c(i,"text-anchor","middle"),c(i,"dominant-baseline","middle"),c(i,"x",0),c(i,"y",0)},m(_,g){E(_,e,g),V(e,t),V(e,i),V(i,r),u=!0},p(_,g){(!u||g&2)&&O(t,"fill-w_high",_[1].lastValue===A.HIGH),(!u||g&2)&&O(t,"fill-w_low",_[1].lastValue===A.LOW),(!u||g&2)&&O(t,"fill-w_x",_[1].lastValue===A.X),(!u||g&2)&&O(t,"fill-w_z",_[1].lastValue===A.Z),(!u||g&2)&&O(t,"opacity-25",_[1].lastValue===A.Z),(!u||g&2)&&l!==(l=_[1].lastValue+"")&&J(r,l)},i(_){u||($e(()=>{o&&o.end(1),s=Jt(t,n[3],{}),s.start()}),$e(()=>{h&&h.end(1),a=Jt(i,n[3],{factor:1,offset:-1}),a.start()}),u=!0)},o(_){s&&s.invalidate(),o=Qt(t,n[3],{factor:-1}),a&&a.invalidate(),h=Qt(i,n[3],{factor:-1,offset:-1}),u=!1},d(_){_&&b(e),_&&o&&o.end(),_&&h&&h.end()}}}function ys(n){let e,t,s=n[1].lastValue,o,i,l=zn(n);return{c(){e=G("rect"),t=$(),l.c(),o=se(),this.h()},l(r){e=R(r,"rect",{class:!0,rx:!0,ry:!0,x:!0,y:!0,width:!0,height:!0}),D(e).forEach(b),t=Y(r),l.l(r),o=se(),this.h()},h(){c(e,"class","fill-slate-700/30 stroke-black stroke-2"),c(e,"rx","10"),c(e,"ry","10"),c(e,"x",-Nt/2),c(e,"y",-At/2),c(e,"width",Nt),c(e,"height",At)},m(r,a){E(r,e,a),E(r,t,a),l.m(r,a),E(r,o,a),i=!0},p(r,a){a&2&&re(s,s=r[1].lastValue)?(Ve(),B(l,1,1,Se),Ee(),l=zn(r),l.c(),L(l,1),l.m(o.parentNode,o)):l.p(r,a)},i(r){i||(L(l),i=!0)},o(r){B(l),i=!1},d(r){r&&b(e),r&&b(t),r&&b(o),l.d(r)}}}function Cs(n){let e,t;return e=new Zt({props:{width:Nt,height:At,show_labels:!1,show_name:!1,abstract_node:n[0],$$slots:{default:[ys]},$$scope:{ctx:n}}}),e.$on("cancel_port_connect",n[4]),{c(){Q(e.$$.fragment)},l(s){F(e.$$.fragment,s)},m(s,o){K(e,s,o),t=!0},p(s,[o]){const i={};o&1&&(i.abstract_node=s[0]),o&34&&(i.$$scope={dirty:o,ctx:s}),e.$set(i)},i(s){t||(L(e.$$.fragment,s),t=!0)},o(s){B(e.$$.fragment,s),t=!1},d(s){x(e,s)}}}const et=60;let Nt=80,At=80;function Vs(n,e,t){let s,{abstract_node:o}=e;const i=o.getInput(0).getStore();N(n,i,a=>t(1,s=a));function l(a,{factor:h=1,offset:u=0}){return{duration:400,css:_=>{const g=Jn(_);return`
					transform: rotate(${h*(g+u)*90}deg);
                    opacity: ${g*100}%;
                    `}}}function r(a){Oe.call(this,n,a)}return n.$$set=a=>{"abstract_node"in a&&t(0,o=a.abstract_node)},[o,s,i,l,r]}class Es extends _e{constructor(e){super(),de(this,e,Vs,Cs,re,{abstract_node:0})}}function yn(n){let e,t;return{c(){e=G("path"),this.h()},l(s){e=R(s,"path",{class:!0,"stroke-linecap":!0,d:!0}),D(e).forEach(b),this.h()},h(){c(e,"class","pointer-events-none dashed stroke-w_z fill-transparent stroke-[5] transition-colors svelte-mbvv01"),c(e,"stroke-linecap","round"),c(e,"d",t=n[2]?n[5](n[0].x,n[0].y,n[2].x,n[2].y):n[5](n[0].x,n[0].y,n[3].x*n[4]+n[1].x,n[3].y*n[4]+n[1].y))},m(s,o){E(s,e,o)},p(s,o){o&31&&t!==(t=s[2]?s[5](s[0].x,s[0].y,s[2].x,s[2].y):s[5](s[0].x,s[0].y,s[3].x*s[4]+s[1].x,s[3].y*s[4]+s[1].y))&&c(e,"d",t)},d(s){s&&b(e)}}}function Is(n){let e,t=n[0]&&yn(n);return{c(){t&&t.c(),e=se()},l(s){t&&t.l(s),e=se()},m(s,o){t&&t.m(s,o),E(s,e,o)},p(s,[o]){s[0]?t?t.p(s,o):(t=yn(s),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:Se,o:Se,d(s){t&&t.d(s),s&&b(e)}}}function Ps(n,e,t){let s,o,i,l,r;N(n,Ye,f=>t(0,s=f)),N(n,St,f=>t(1,o=f)),N(n,Be,f=>t(2,i=f)),N(n,Ht,f=>t(3,l=f)),N(n,Ae,f=>t(4,r=f));const a=s==null?void 0:s.type;let h,u=0,_=0;function g(){if(s){const f=s.x;s.y;const C=o.x;o.y;const k=C-f;return Math.max(Math.abs(k),10)}return 0}function m(f){if(f){if(f===ve.IN)return-g();if(f===ve.OUT)return g()}return 0}function v(f,C,k,I){return s?(u=m(a),_=m(h),`M ${f} ${C}
            C ${f+u} ${C}
              ${k+_} ${I}
              ${k} ${I}`):""}return h=a?a===ve.IN?ve.OUT:ve.IN:void 0,[s,o,i,l,r,v]}class Ws extends _e{constructor(e){super(),de(this,e,Ps,Is,re,{})}}function Ss(n){let e=n[3].id+"",t;return{c(){t=H(e)},l(s){t=M(s,e)},m(s,o){E(s,t,o)},p(s,o){o&8&&e!==(e=s[3].id+"")&&J(t,e)},d(s){s&&b(t)}}}function Hs(n){let e,t,s=n[3].lastValue+"",o,i,l,r,a,h,u,_,g,m,v,f,C,k;function I(d){n[18](d)}let p={x:(n[2].x+n[11](n[9])+n[1].x+n[11](n[10]))/2,y:(n[2].y+n[1].y)/2,classes:"fill-white stroke-black",$$slots:{default:[Ss]},$$scope:{ctx:n}};return n[5]!==void 0&&(p.show=n[5]),m=new je({props:p}),le.push(()=>he(m,"show",I)),{c(){e=G("g"),t=G("title"),o=H(s),i=G("path"),h=G("path"),g=$(),Q(m.$$.fragment),this.h()},l(d){e=R(d,"g",{});var y=D(e);t=R(y,"title",{});var U=D(t);o=M(U,s),U.forEach(b),i=R(y,"path",{class:!0,"stroke-width":!0,"stroke-linecap":!0,fill:!0,d:!0}),D(i).forEach(b),h=R(y,"path",{class:!0,"stroke-linecap":!0,d:!0}),D(h).forEach(b),y.forEach(b),g=Y(d),F(m.$$.fragment,d),this.h()},h(){c(i,"class",l=(n[0]?"stroke-yellow-500/60":"stroke-transparent")+" transition-colors"),c(i,"stroke-width",r=Math.max(10*n[4],15)),c(i,"stroke-linecap","round"),c(i,"fill","transparent"),c(i,"d",a=n[12](n[2].x,n[2].y,n[1].x,n[1].y)),c(h,"class","fill-transparent stroke-[5] transition-colors duration-100 svelte-mbvv01"),c(h,"stroke-linecap",u=n[0]?"round":"inherit"),c(h,"d",_=n[12](n[2].x,n[2].y,n[1].x,n[1].y)),O(h,"stroke-w_high",n[3].lastValue===A.HIGH),O(h,"stroke-w_low",n[3].lastValue===A.LOW),O(h,"stroke-w_x",n[3].lastValue===A.X),O(h,"stroke-w_z",n[3].lastValue===A.Z),O(h,"opacity-25",n[3].lastValue===A.Z),O(h,"dashed",n[0])},m(d,y){E(d,e,y),V(e,t),V(t,o),V(e,i),V(e,h),E(d,g,y),K(m,d,y),f=!0,C||(k=[ne(e,"mouseenter",n[15]),ne(e,"mouseleave",n[16]),ne(e,"mousedown",n[17])],C=!0)},p(d,[y]){(!f||y&8)&&s!==(s=d[3].lastValue+"")&&J(o,s),(!f||y&1&&l!==(l=(d[0]?"stroke-yellow-500/60":"stroke-transparent")+" transition-colors"))&&c(i,"class",l),(!f||y&16&&r!==(r=Math.max(10*d[4],15)))&&c(i,"stroke-width",r),(!f||y&6&&a!==(a=d[12](d[2].x,d[2].y,d[1].x,d[1].y)))&&c(i,"d",a),(!f||y&1&&u!==(u=d[0]?"round":"inherit"))&&c(h,"stroke-linecap",u),(!f||y&6&&_!==(_=d[12](d[2].x,d[2].y,d[1].x,d[1].y)))&&c(h,"d",_),(!f||y&8)&&O(h,"stroke-w_high",d[3].lastValue===A.HIGH),(!f||y&8)&&O(h,"stroke-w_low",d[3].lastValue===A.LOW),(!f||y&8)&&O(h,"stroke-w_x",d[3].lastValue===A.X),(!f||y&8)&&O(h,"stroke-w_z",d[3].lastValue===A.Z),(!f||y&8)&&O(h,"opacity-25",d[3].lastValue===A.Z),(!f||y&1)&&O(h,"dashed",d[0]);const U={};y&6&&(U.x=(d[2].x+d[11](d[9])+d[1].x+d[11](d[10]))/2),y&6&&(U.y=(d[2].y+d[1].y)/2),y&8388616&&(U.$$scope={dirty:y,ctx:d}),!v&&y&32&&(v=!0,U.show=d[5],ue(()=>v=!1)),m.$set(U)},i(d){f||(L(m.$$.fragment,d),f=!0)},o(d){B(m.$$.fragment,d),f=!1},d(d){d&&b(e),d&&b(g),x(m,d),C=!1,ut(k)}}}function Ms(n,e,t){let s,o,i,l,r,a;N(n,Pe,z=>t(21,l=z)),N(n,Ae,z=>t(4,r=z)),N(n,Ie,z=>t(5,a=z));let{wire_node:h}=e;const u=h.getStore();N(n,u,z=>t(3,i=z));const _=l.getConnector(i.conA).getStore();N(n,_,z=>t(2,o=z));const g=l.getConnector(i.conB).getStore();N(n,g,z=>t(1,s=z));let m=!1;const v=o.type,f=s.type;let C=0,k=0;function I(){const z=o.x;o.y;const oe=s.x;s.y;const P=oe-z;return Math.max(Math.abs(P),10)}function p(z){return z===ve.IN?-I():z===ve.OUT?I():0}function d(z,oe,P,w){return C=p(v),k=p(f),`M ${z} ${oe}
            C ${z+C} ${oe}
              ${P+k} ${w}
              ${P} ${w}`}const y=Wn(),U=z=>t(0,m=!0),W=z=>t(0,m=!1),q=z=>{i.disconnectAll(),y("updateWires",{})};function ae(z){a=z,Ie.set(a)}return n.$$set=z=>{"wire_node"in z&&t(14,h=z.wire_node)},[m,s,o,i,r,a,u,_,g,v,f,p,d,y,h,U,W,q,ae]}class Ds extends _e{constructor(e){super(),de(this,e,Ms,Hs,re,{wire_node:14})}}function Cn(n,e,t){const s=n.slice();return s[12]=e[t],s}function Vn(n,e,t){const s=n.slice();return s[15]=e[t],s}function En(n,e){let t,s,o;return s=new Ds({props:{wire_node:e[15]}}),s.$on("updateWires",e[6]),{key:n,first:null,c(){t=se(),Q(s.$$.fragment),this.h()},l(i){t=se(),F(s.$$.fragment,i),this.h()},h(){this.first=t},m(i,l){E(i,t,l),K(s,i,l),o=!0},p(i,l){e=i;const r={};l&2&&(r.wire_node=e[15]),s.$set(r)},i(i){o||(L(s.$$.fragment,i),o=!0)},o(i){B(s.$$.fragment,i),o=!1},d(i){i&&b(t),x(s,i)}}}function Os(n){let e,t;return e=new Zt({props:{abstract_node:n[12]}}),e.$on("cancel_port_connect",n[3]),{c(){Q(e.$$.fragment)},l(s){F(e.$$.fragment,s)},m(s,o){K(e,s,o),t=!0},p(s,o){const i={};o&4&&(i.abstract_node=s[12]),e.$set(i)},i(s){t||(L(e.$$.fragment,s),t=!0)},o(s){B(e.$$.fragment,s),t=!1},d(s){x(e,s)}}}function Ls(n){let e,t;return e=new Es({props:{abstract_node:n[12]}}),e.$on("cancel_port_connect",n[3]),{c(){Q(e.$$.fragment)},l(s){F(e.$$.fragment,s)},m(s,o){K(e,s,o),t=!0},p(s,o){const i={};o&4&&(i.abstract_node=s[12]),e.$set(i)},i(s){t||(L(e.$$.fragment,s),t=!0)},o(s){B(e.$$.fragment,s),t=!1},d(s){x(e,s)}}}function Ns(n){let e,t;return e=new zs({props:{abstract_node:n[12]}}),e.$on("cancel_port_connect",n[3]),{c(){Q(e.$$.fragment)},l(s){F(e.$$.fragment,s)},m(s,o){K(e,s,o),t=!0},p(s,o){const i={};o&4&&(i.abstract_node=s[12]),e.$set(i)},i(s){t||(L(e.$$.fragment,s),t=!0)},o(s){B(e.$$.fragment,s),t=!1},d(s){x(e,s)}}}function In(n,e){let t,s,o,i,l;const r=[Ns,Ls,Os],a=[];function h(u,_){return u[12]instanceof ot?0:u[12]instanceof st?1:2}return s=h(e),o=a[s]=r[s](e),{key:n,first:null,c(){t=se(),o.c(),i=se(),this.h()},l(u){t=se(),o.l(u),i=se(),this.h()},h(){this.first=t},m(u,_){E(u,t,_),a[s].m(u,_),E(u,i,_),l=!0},p(u,_){e=u;let g=s;s=h(e),s===g?a[s].p(e,_):(Ve(),B(a[g],1,1,()=>{a[g]=null}),Ee(),o=a[s],o?o.p(e,_):(o=a[s]=r[s](e),o.c()),L(o,1),o.m(i.parentNode,i))},i(u){l||(L(o),l=!0)},o(u){B(o),l=!1},d(u){u&&b(t),a[s].d(u),u&&b(i)}}}function As(n){let e=[],t=new Map,s,o=[],i=new Map,l,r,a,h=n[1];const u=m=>m[15].id;for(let m=0;m<h.length;m+=1){let v=Vn(n,h,m),f=u(v);t.set(f,e[m]=En(f,v))}let _=n[2];const g=m=>m[12].id;for(let m=0;m<_.length;m+=1){let v=Cn(n,_,m),f=g(v);i.set(f,o[m]=In(f,v))}return r=new Ws({}),{c(){for(let m=0;m<e.length;m+=1)e[m].c();s=$();for(let m=0;m<o.length;m+=1)o[m].c();l=$(),Q(r.$$.fragment)},l(m){for(let v=0;v<e.length;v+=1)e[v].l(m);s=Y(m);for(let v=0;v<o.length;v+=1)o[v].l(m);l=Y(m),F(r.$$.fragment,m)},m(m,v){for(let f=0;f<e.length;f+=1)e[f].m(m,v);E(m,s,v);for(let f=0;f<o.length;f+=1)o[f].m(m,v);E(m,l,v),K(r,m,v),a=!0},p(m,[v]){v&3&&(h=m[1],Ve(),e=Ft(e,v,u,1,m,h,t,s.parentNode,Kt,En,s,Vn),Ee()),v&12&&(_=m[2],Ve(),o=Ft(o,v,g,1,m,_,i,l.parentNode,Kt,In,l,Cn),Ee())},i(m){if(!a){for(let v=0;v<h.length;v+=1)L(e[v]);for(let v=0;v<_.length;v+=1)L(o[v]);L(r.$$.fragment,m),a=!0}},o(m){for(let v=0;v<e.length;v+=1)B(e[v]);for(let v=0;v<o.length;v+=1)B(o[v]);B(r.$$.fragment,m),a=!1},d(m){for(let v=0;v<e.length;v+=1)e[v].d(m);m&&b(s);for(let v=0;v<o.length;v+=1)o[v].d(m);m&&b(l),x(r,m)}}}function Bs(n,e,t){let s,o,i,l;N(n,Pe,v=>t(0,s=v)),N(n,Be,v=>t(8,o=v)),N(n,Ye,v=>t(9,i=v)),N(n,Mt,v=>t(5,l=v));function r(v){console.debug("LOAD STRING",v),v!==null&&(s.fromDto(JSON.parse(v)),Pe.set(s))}let a=!1;Pn(()=>{const v=window.localStorage.getItem("component_store");r(v),s.components.size===0&&(s.createComponent(ot),s.createComponent(ot),s.createComponent(st),s.createComponent(st),s.createComponent(Et),s.createComponent(Et),s.createComponent(Pt),s.createComponent(Pt),s.createComponent(It),s.createComponent(It),Pe.set(s)),t(4,a=!0)});function h(){console.info("[NodeManager] Saving");const v=JSON.stringify(s.getDto(),function(C,k){return C==="lm"?void 0:k});window.localStorage.setItem("component_store",v)}function u(v){i!==null&&o!==null&&(s.createWire(i.id,o.id),Pe.set(s)),Ye.set(null),Be.set(null)}let _,g;const m=()=>{s.filterWires(),Pe.set(s)};return n.$$.update=()=>{n.$$.dirty&16&&a&&h(),n.$$.dirty&32&&l&&(h(),me(Mt,l=!1,l)),n.$$.dirty&1&&t(1,_=[...s.wires.values()]),n.$$.dirty&1&&t(2,g=[...s.components.values()])},[s,_,g,u,a,l,m]}class Zs extends _e{constructor(e){super(),de(this,e,Bs,As,re,{})}}const{window:Ct}=Un;function Us(n){let e,t,s,o,i,l,r,a,h=Math.round(n[6].x)+"",u,_,g=Math.round(n[6].y)+"",m,v,f,C,k,I,p,d,y,U,W=Math.round(n[2])+"",q,ae,z=Math.round(n[3])+"",oe,P,w=Math.round(n[4])+"",Z,S,ce=Math.round(n[5])+"",Je,ft,Me,ct,Ze=(n[9]!==null?n[9].id:"null")+"",Qe,_t,De,dt,Ue=(n[10]!==null?n[10].id:"null")+"",Fe,vt,ke,ze,Te,mt,gt,ye,Xe,pt,Ut,ie,wt,Tt;return s=new Zs({}),{c(){e=ee("div"),t=G("svg"),Q(s.$$.fragment),i=$(),l=ee("div"),r=ee("p"),a=H("Position x:"),u=H(h),_=H(" y:"),m=H(g),v=$(),f=ee("p"),C=H("Size w:"),k=H(n[0]),I=H(" h:"),p=H(n[1]),d=$(),y=ee("p"),U=H("vx:"),q=H(W),ae=H(" vy:"),oe=H(z),P=H(" vw:"),Z=H(w),S=H(" vh:"),Je=H(ce),ft=$(),Me=ee("p"),ct=H("Primary: "),Qe=H(Ze),_t=$(),De=ee("p"),dt=H("Secondary: "),Fe=H(Ue),vt=$(),ke=ee("div"),ze=ee("div"),Te=ee("p"),mt=H("save"),gt=$(),ye=ee("div"),Xe=ee("p"),pt=H("clear"),this.h()},l(T){e=te(T,"DIV",{class:!0});var j=D(e);t=R(j,"svg",{class:!0,xmlns:!0,version:!0,viewBox:!0,style:!0});var Xt=D(t);F(s.$$.fragment,Xt),Xt.forEach(b),i=Y(j),l=te(j,"DIV",{id:!0,class:!0});var ge=D(l);r=te(ge,"P",{});var Ge=D(r);a=M(Ge,"Position x:"),u=M(Ge,h),_=M(Ge," y:"),m=M(Ge,g),Ge.forEach(b),v=Y(ge),f=te(ge,"P",{});var Re=D(f);C=M(Re,"Size w:"),k=M(Re,n[0]),I=M(Re," h:"),p=M(Re,n[1]),Re.forEach(b),d=Y(ge),y=te(ge,"P",{});var be=D(y);U=M(be,"vx:"),q=M(be,W),ae=M(be," vy:"),oe=M(be,z),P=M(be," vw:"),Z=M(be,w),S=M(be," vh:"),Je=M(be,ce),be.forEach(b),ft=Y(ge),Me=te(ge,"P",{});var bt=D(Me);ct=M(bt,"Primary: "),Qe=M(bt,Ze),bt.forEach(b),_t=Y(ge),De=te(ge,"P",{});var kt=D(De);dt=M(kt,"Secondary: "),Fe=M(kt,Ue),kt.forEach(b),ge.forEach(b),vt=Y(j),ke=te(j,"DIV",{class:!0});var Ke=D(ke);ze=te(Ke,"DIV",{id:!0,class:!0});var Gt=D(ze);Te=te(Gt,"P",{});var Rt=D(Te);mt=M(Rt,"save"),Rt.forEach(b),Gt.forEach(b),gt=Y(Ke),ye=te(Ke,"DIV",{id:!0,class:!0});var qt=D(ye);Xe=te(qt,"P",{});var $t=D(Xe);pt=M($t,"clear"),$t.forEach(b),qt.forEach(b),Ke.forEach(b),j.forEach(b),this.h()},h(){c(t,"class","absolute w-full h-full svelte-1qj4orl"),c(t,"xmlns","http://www.w3.org/2000/svg"),c(t,"version","1.1"),c(t,"viewBox",o=n[2]+" "+n[3]+" "+n[4]+" "+n[5]),we(t,"background-position",(-n[2]+60)/n[7]+"px "+(-n[3]+60)/n[7]+"px"),we(t,"background-image","url('data:image/svg+xml,%3Csvg xmlns=\\'http://www.w3.org/2000/svg\\' width=\\'"+135/n[7]+"\\' height=\\'"+135/n[7]+"\\' viewBox=\\'"+0+" "+0+" "+100+" "+100+"\\'%3E%3Cg fill-rule=\\'evenodd\\'%3E%3Cg fill=\\'%23898989\\' fill-opacity=\\'0.4\\'%3E%3Cpath opacity=\\'.5\\' d=\\'M96 95h4v1h-4v4h-1v-4h-9v4h-1v-4h-9v4h-1v-4h-9v4h-1v-4h-9v4h-1v-4h-9v4h-1v-4h-9v4h-1v-4h-9v4h-1v-4h-9v4h-1v-4H0v-1h15v-9H0v-1h15v-9H0v-1h15v-9H0v-1h15v-9H0v-1h15v-9H0v-1h15v-9H0v-1h15v-9H0v-1h15v-9H0v-1h15V0h1v15h9V0h1v15h9V0h1v15h9V0h1v15h9V0h1v15h9V0h1v15h9V0h1v15h9V0h1v15h9V0h1v15h4v1h-4v9h4v1h-4v9h4v1h-4v9h4v1h-4v9h4v1h-4v9h4v1h-4v9h4v1h-4v9h4v1h-4v9zm-1 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-9-10h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm9-10v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-9-10h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm9-10v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-9-10h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm9-10v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-9-10h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9z\\'/%3E%3Cpath d=\\'M6 5V0H5v5H0v1h5v94h1V6h94V5H6z\\'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E')"),c(l,"id","infopanel"),c(l,"class","pointer-events-none bg-[rgb(255,255,255,0.7)] p-2 rounded-lg absolute top-3 left-3 text-xl font-mono"),c(ze,"id","save-button"),c(ze,"class","transition-all hover:scale-110 border-2 hover:border-blue-500 border-slate-500/60 bg-white/60 p-2 rounded-lg text-xl font-mono"),c(ye,"id","save-button"),c(ye,"class","transition-all hover:scale-110 border-2 hover:border-blue-500 border-slate-500/60 bg-white/60 p-2 rounded-lg text-xl font-mono"),c(ke,"class","absolute top-3 right-3 flex gap-3"),c(e,"class","select-none relative flex-grow flex-shrink basis-auto border border-solid border-black dashed"),$e(()=>n[22].call(e))},m(T,j){E(T,e,j),V(e,t),K(s,t,null),n[19](t),V(e,i),V(e,l),V(l,r),V(r,a),V(r,u),V(r,_),V(r,m),V(l,v),V(l,f),V(f,C),V(f,k),V(f,I),V(f,p),V(l,d),V(l,y),V(y,U),V(y,q),V(y,ae),V(y,oe),V(y,P),V(y,Z),V(y,S),V(y,Je),V(l,ft),V(l,Me),V(Me,ct),V(Me,Qe),V(l,_t),V(l,De),V(De,dt),V(De,Fe),V(e,vt),V(e,ke),V(ke,ze),V(ze,Te),V(Te,mt),V(ke,gt),V(ke,ye),V(ye,Xe),V(Xe,pt),Ut=Zn(e,n[22].bind(e)),ie=!0,wt||(Tt=[ne(Ct,"mousemove",n[15]),ne(Ct,"mouseup",n[14]),ne(Ct,"wheel",n[16]),ne(t,"mousedown",n[13]),ne(ze,"mousedown",n[20]),ne(ye,"mousedown",n[21])],wt=!0)},p(T,[j]){(!ie||j&60&&o!==(o=T[2]+" "+T[3]+" "+T[4]+" "+T[5]))&&c(t,"viewBox",o),(!ie||j&140)&&we(t,"background-position",(-T[2]+60)/T[7]+"px "+(-T[3]+60)/T[7]+"px"),(!ie||j&128)&&we(t,"background-image","url('data:image/svg+xml,%3Csvg xmlns=\\'http://www.w3.org/2000/svg\\' width=\\'"+135/T[7]+"\\' height=\\'"+135/T[7]+"\\' viewBox=\\'"+0+" "+0+" "+100+" "+100+"\\'%3E%3Cg fill-rule=\\'evenodd\\'%3E%3Cg fill=\\'%23898989\\' fill-opacity=\\'0.4\\'%3E%3Cpath opacity=\\'.5\\' d=\\'M96 95h4v1h-4v4h-1v-4h-9v4h-1v-4h-9v4h-1v-4h-9v4h-1v-4h-9v4h-1v-4h-9v4h-1v-4h-9v4h-1v-4h-9v4h-1v-4h-9v4h-1v-4H0v-1h15v-9H0v-1h15v-9H0v-1h15v-9H0v-1h15v-9H0v-1h15v-9H0v-1h15v-9H0v-1h15v-9H0v-1h15v-9H0v-1h15V0h1v15h9V0h1v15h9V0h1v15h9V0h1v15h9V0h1v15h9V0h1v15h9V0h1v15h9V0h1v15h9V0h1v15h4v1h-4v9h4v1h-4v9h4v1h-4v9h4v1h-4v9h4v1h-4v9h4v1h-4v9h4v1h-4v9h4v1h-4v9zm-1 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-9-10h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm9-10v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-9-10h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm9-10v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-9-10h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm9-10v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-9-10h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9z\\'/%3E%3Cpath d=\\'M6 5V0H5v5H0v1h5v94h1V6h94V5H6z\\'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E')"),(!ie||j&64)&&h!==(h=Math.round(T[6].x)+"")&&J(u,h),(!ie||j&64)&&g!==(g=Math.round(T[6].y)+"")&&J(m,g),(!ie||j&1)&&J(k,T[0]),(!ie||j&2)&&J(p,T[1]),(!ie||j&4)&&W!==(W=Math.round(T[2])+"")&&J(q,W),(!ie||j&8)&&z!==(z=Math.round(T[3])+"")&&J(oe,z),(!ie||j&16)&&w!==(w=Math.round(T[4])+"")&&J(Z,w),(!ie||j&32)&&ce!==(ce=Math.round(T[5])+"")&&J(Je,ce),(!ie||j&512)&&Ze!==(Ze=(T[9]!==null?T[9].id:"null")+"")&&J(Qe,Ze),(!ie||j&1024)&&Ue!==(Ue=(T[10]!==null?T[10].id:"null")+"")&&J(Fe,Ue)},i(T){ie||(L(s.$$.fragment,T),ie=!0)},o(T){B(s.$$.fragment,T),ie=!1},d(T){T&&b(e),x(s),n[19](null),Ut(),wt=!1,ut(Tt)}}}function Ts(n,e,t){let s,o,i,l,r,a,h,u;N(n,St,S=>t(24,s=S)),N(n,nn,S=>t(25,o=S)),N(n,Ae,S=>t(26,r=S)),N(n,Ht,S=>t(27,a=S)),N(n,Ye,S=>t(9,h=S)),N(n,Be,S=>t(10,u=S));let _=0,g=0,m=Ot({x:0,y:0},{stiffness:.5,damping:.5});N(n,m,S=>t(6,i=S));let v=Ot(1);N(n,v,S=>t(7,l=S));let f,C,k=0,I=0,p=1920,d=1080,y=!1,U;function W(S){U===S.target&&(console.debug("[LogicViewer] Dragging Canvas Started"),y=!0)}function q(S){y=!1,console.debug("[LogicViewer] Dragging Canvas Stopped")}function ae(S){me(Ht,a={x:S.offsetX,y:S.offsetY},a),y&&(t(17,_-=S.movementX*r),t(18,g-=S.movementY*r))}function z(S){console.debug("[LogicViewer] Scoll Canvas"),me(v,l+=S.deltaY/500,l),l<.5?me(v,l=.5,l):l>10&&me(v,l=10,l)}function oe(S){le[S?"unshift":"push"](()=>{U=S,t(8,U)})}const P=S=>{Mt.set(!0)},w=S=>{window.localStorage.clear()};function Z(){f=this.clientWidth,C=this.clientHeight,t(0,f),t(1,C)}return n.$$.update=()=>{if(n.$$.dirty&393216&&m.set({x:_,y:g}),n.$$.dirty&255){Ae.set(l);const S=f/(2/l),ce=C/(2/l);t(2,k=i.x-S),t(3,I=i.y-ce),t(4,p=2*S),t(5,d=2*ce),me(nn,o={x:p,y:d},o),me(St,s={x:k,y:I},s)}},[f,C,k,I,p,d,i,l,U,h,u,m,v,W,q,ae,z,_,g,oe,P,w,Z]}class Xs extends _e{constructor(e){super(),de(this,e,Ts,Us,re,{})}}function Gs(n){let e,t,s,o;const i=n[3].default,l=lt(i,n,n[2],null);return{c(){e=ee("button"),l&&l.c(),this.h()},l(r){e=te(r,"BUTTON",{class:!0});var a=D(e);l&&l.l(a),a.forEach(b),this.h()},h(){c(e,"class","text-white text-center text-sm font-sans rounded-full px-5 py-2 transition-colors"),O(e,"bg-green-500",n[0]),O(e,"bg-red-600",!n[0])},m(r,a){E(r,e,a),l&&l.m(e,null),t=!0,s||(o=ne(e,"click",n[1]),s=!0)},p(r,[a]){l&&l.p&&(!t||a&4)&&rt(l,i,r,r[2],t?ht(i,r[2],a,null):at(r[2]),null),(!t||a&1)&&O(e,"bg-green-500",r[0]),(!t||a&1)&&O(e,"bg-red-600",!r[0])},i(r){t||(L(l,r),t=!0)},o(r){B(l,r),t=!1},d(r){r&&b(e),l&&l.d(r),s=!1,o()}}}function Rs(n,e,t){let{$$slots:s={},$$scope:o}=e,{value:i=!1}=e;function l(){t(0,i=!i),console.debug("[ToggleButton]",this.innerHTML," = ",i)}return n.$$set=r=>{"value"in r&&t(0,i=r.value),"$$scope"in r&&t(2,o=r.$$scope)},[i,l,o,s]}class Vt extends _e{constructor(e){super(),de(this,e,Rs,Gs,re,{value:0})}}function qs(n){let e;return{c(){e=H("Show Positions")},l(t){e=M(t,"Show Positions")},m(t,s){E(t,e,s)},d(t){t&&b(e)}}}function $s(n){let e;return{c(){e=H("Show Indices")},l(t){e=M(t,"Show Indices")},m(t,s){E(t,e,s)},d(t){t&&b(e)}}}function Ys(n){let e;return{c(){e=H("Use Grid")},l(t){e=M(t,"Use Grid")},m(t,s){E(t,e,s)},d(t){t&&b(e)}}}function js(n){let e,t,s,o,i,l,r,a,h,u;function _(k){n[3](k)}let g={$$slots:{default:[qs]},$$scope:{ctx:n}};n[0]!==void 0&&(g.value=n[0]),t=new Vt({props:g}),le.push(()=>he(t,"value",_));function m(k){n[4](k)}let v={$$slots:{default:[$s]},$$scope:{ctx:n}};n[1]!==void 0&&(v.value=n[1]),i=new Vt({props:v}),le.push(()=>he(i,"value",m));function f(k){n[5](k)}let C={$$slots:{default:[Ys]},$$scope:{ctx:n}};return n[2]!==void 0&&(C.value=n[2]),a=new Vt({props:C}),le.push(()=>he(a,"value",f)),{c(){e=ee("div"),Q(t.$$.fragment),o=$(),Q(i.$$.fragment),r=$(),Q(a.$$.fragment),this.h()},l(k){e=te(k,"DIV",{class:!0});var I=D(e);F(t.$$.fragment,I),o=Y(I),F(i.$$.fragment,I),r=Y(I),F(a.$$.fragment,I),I.forEach(b),this.h()},h(){c(e,"class","flex p-1 flex-row gap-2")},m(k,I){E(k,e,I),K(t,e,null),V(e,o),K(i,e,null),V(e,r),K(a,e,null),u=!0},p(k,[I]){const p={};I&64&&(p.$$scope={dirty:I,ctx:k}),!s&&I&1&&(s=!0,p.value=k[0],ue(()=>s=!1)),t.$set(p);const d={};I&64&&(d.$$scope={dirty:I,ctx:k}),!l&&I&2&&(l=!0,d.value=k[1],ue(()=>l=!1)),i.$set(d);const y={};I&64&&(y.$$scope={dirty:I,ctx:k}),!h&&I&4&&(h=!0,y.value=k[2],ue(()=>h=!1)),a.$set(y)},i(k){u||(L(t.$$.fragment,k),L(i.$$.fragment,k),L(a.$$.fragment,k),u=!0)},o(k){B(t.$$.fragment,k),B(i.$$.fragment,k),B(a.$$.fragment,k),u=!1},d(k){k&&b(e),x(t),x(i),x(a)}}}function Js(n,e,t){let s,o,i;N(n,Ne,h=>t(0,s=h)),N(n,Ie,h=>t(1,o=h)),N(n,Wt,h=>t(2,i=h));function l(h){s=h,Ne.set(s)}function r(h){o=h,Ie.set(o)}function a(h){i=h,Wt.set(i)}return[s,o,i,l,r,a]}class Qs extends _e{constructor(e){super(),de(this,e,Js,js,re,{})}}function Fs(n){let e,t,s,o,i,l,r,a;return i=new Qs({}),r=new Xs({}),{c(){e=ee("div"),t=ee("h1"),s=H("Logic Simulator"),o=$(),Q(i.$$.fragment),l=$(),Q(r.$$.fragment),this.h()},l(h){e=te(h,"DIV",{class:!0});var u=D(e);t=te(u,"H1",{class:!0});var _=D(t);s=M(_,"Logic Simulator"),_.forEach(b),o=Y(u),F(i.$$.fragment,u),l=Y(u),F(r.$$.fragment,u),u.forEach(b),this.h()},h(){c(t,"class","p-3 flex-grow-0 flexshrink basis-auto text-4xl font-bold self-center"),c(e,"class","flex flex-col h-full")},m(h,u){E(h,e,u),V(e,t),V(t,s),V(e,o),K(i,e,null),V(e,l),K(r,e,null),a=!0},p:Se,i(h){a||(L(i.$$.fragment,h),L(r.$$.fragment,h),a=!0)},o(h){B(i.$$.fragment,h),B(r.$$.fragment,h),a=!1},d(h){h&&b(e),x(i),x(r)}}}class lo extends _e{constructor(e){super(),de(this,e,null,Fs,re,{})}}export{lo as default};
